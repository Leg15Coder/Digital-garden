Пусть $G$ - ориентированный граф. Пусть $\sigma : V \to \mathbb{N}$ - нумерованная перестановка вершин графа, тогда

==Опр.== $\sigma$ - **топологическая сортировка (топсорт, topsort)**, если $\forall (u, v) \in E\ :\ \sigma(u) < \sigma(v)$

### Критерий существования топологической сортировки

- Топологическая сортировка существует тогда и только тогда, когда граф ацикличен.

#### Доказательство. 

Следует из линейности отношения порядка сравнения.

### Построение топсорта

1) Запустим [[DFS|DFS]] на каждом компоненте связности графа.
2) В момент выхода [[DFS|DFS]] из вершины, будем добавлять её в нелокальный массив
3) Развернём полученный массив - это и есть топсорт.

#### Корректность

В DFS, если $u$ достижима из $v$, то $t_{out}(v) > t_{out}(u)$. Таким образом, искомая топологическая сортировка — это сортировка в порядке убывания времён выхода.

#### Асимптотика

- По времени такая же как у обхода в глубину: $O(|V| + |E|)$
- По памяти: обход в глубину + хранение массива = $O(|V| + |V|) = O(|V| + |E|)$
