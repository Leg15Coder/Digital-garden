==Опр.== **Амортизационный анализ** - метод [[Асимптотический анализ алгоритма|анализа алгоритмов]], который оценивает среднюю стоимость выполнения одной операции в наихудшем случае за последовательность операций.

==Опр.== **Амортизационная сложность ($O^*(f)$ или $O(f^*)$)** - суммарное время обработки запросов $f$ из некоторого бесконечно большого набора запросов (время работы $f$ может зависеть от порядка и входных данных других запросов) в худшем случае.

## Методы Амортизационного анализа
### Метод усреднения (групповой анализ)

- **Суть метода**: *берём среднее значение по времени выполнения операций*.

1) Берём последовательность операций $\{x_i\}_{i=1}^n$.
2) Вычисляем суммарную стоимость всех операций в элементарных операциях: $T(n) = \sum\limits_{i=1}^n T(x_i)$
3) В качестве амортизационной стоимости последовательности операций берём среднее арифметическое стоимости по времени всех операций: $T^*(n) = \frac{T(n)}{n}$.
4) Для математической справедливости амортизационной стоимости устремляем $n \to \infty$ (смысл такой же, как физ. смысл мат. ожидания).
5) **ИТОГ**: $T^*(x) = \lim\limits_{n \to \infty}(\frac{1}{n}\sum\limits_{i=1}^n T(x_i))$ - амортизационная сложность составной операции $x$.

### Метод монеток (метод бухгалтерского учёта)

- **Суть метода**: *не уйти в долги перед банком*.

1) Виртуально представляем, что каждая элементарная операция стоит одну монету и что у существует банк, в который мы можем класть монеты и из которого мы можем брать монеты в любой момент времени.
2) На каждый исследуемый подобъект (например, элемент в структуре данных) мы выдаём фиксированное число монет при его возникновении и кладём эти монеты в банк.
3) За каждую совершённую операцию мы взимаем плату за неё как сумму всех входящих элементарных операций (можно опустить константное число операций).
4) Если в любой момент времени нет долга перед банком, то это значит, что каждая сложная операция вписывается в некоторую стоимость, определённую начальным капиталом. А так как начальный капитал зависит от количества элементов, то стоимость и есть амортизационная сложность по его определению.

### Метод потенциалов

- **Суть метода**: *связать реальную стоимость операций с изменением "потенциальной энергии" структуры данных так, чтобы можно было построить верхнюю оценку на суммарное количество операций.

==Опр.== **Потенциал ($\varphi$)** - функция, которая в соответствии состоянию СД ставит действительное число и при этом отвечает следующим свойствам:
1) *Неотрицательность*: $\forall D\ :\ \varphi(D) \geq 0$
2) *Начальное состояние*: Если $D_0$ - пустая СД, то $\varphi(D_0) = 0$

Сам метод:
1) Придумываем потенциал для рассматриваемой СД. Пусть мы хотим доказать, что амортизационная сложность составной операции $x$ равна $T^*(n)$
2) Рассматриваем выполнение очередной операции: пусть выполнена операция $x_i$, которая выполнялась $t_i$ элементарных операций и перевела рассматриваемую СД из состояния $D_{i-1}$ в $D_i$, тогда изменение потенциала $\Delta \varphi_i = \varphi(D_i) - \varphi(D_{i-1})$.
3) После выполнения $n$ операций "работа", совершённая над СД будет равна $\sum\limits_{i=1}^n \Delta\varphi_i =$ $\sum\limits_{i=1}^n (\varphi(D_i) - \varphi(D_{i-1})) =$ \[в силу свойств телескопической суммы\] $= \varphi(D_n) - \varphi(D_0)$ $= \varphi(D_n)$. Нам нужно доказать, что $\sum\limits_{i=1}^n t_i =$ $T(n)$ $\leq \sum\limits_{i=1}^n (t_i^* - \Delta\varphi_i)$ $= T^*(n) - \varphi(D_n)$ $\leq T^*(n)$ - верхняя оценка на общее количество совершённых операций. ($t_i^*$ - амортизированное время $i$-й операции)
4) То есть, при правильно выбранном потенциале, если удалось построить оценку на общее суммарное время работы $T(n)$ как показано выше, то мы доказали, что амортизационная сложность составной операции $x$ равна $O(T^*)$.
