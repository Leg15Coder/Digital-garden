##### Проблемы поддержки [[Транзакции#^1ad91c|изолированности]] (аномалии)

| Аномалия                   | Описание                                                                                             |
| -------------------------- | ---------------------------------------------------------------------------------------------------- |
| **Потерянное обновление**  | Изменение одного блока данных несколькими транзакциями одновременно                                  |
| **Грязное чтение**         | Чтение данных, которые были изменены другой транзакцией, но затем откачены                           |
| **Неповторяющееся чтение** | Получение разных значений при повторном чтении одних и тех же данных в рамках одной транзакции       |
| **Чтение фантомов**        | Появление новых строк (удовлетворяющих условию выборки) между повторными чтениями в одной транзакции |

#### Уровни изоляции

1. `READ UNCOMMITTED`
	- Данные блокируются на время внесения изменений.
	- На время чтения данных блокировка отсутствует.
	- Гарантирует отсутствие потерянных обновлений.
	- Итоговое значение – результат выполнения каждой транзакции.
	- Возможно считывание незафиксированных изменений.
2. `READ COMMITTED`
	- Блокирование читаемых и изменяемых данных;
	- Сохранение нескольких версий параллельно изменяемых строк.
	- Используется в большей части СУБД.
	- Защита от грязного чтения.
	- В процессе выполнения одна из транзакций успешно завершается, после чего остальные работают с измененными данными.
	- Возможно неповторяющееся чтение.
3. `REPEATABLE READ`
	- Читающая транзакция игнорирует изменения в данных, которые были ей ранее прочитаны.
	- Никакая транзакция не может изменять данные, читаемые текущей транзакцией, пока чтение не завершено.
	- Защищает от неповторяющегося чтения.
4. `SERIALIZABLE`
	- Транзакции полностью изолированы друг от друга – параллельных транзакций как будто бы не существует вовсе.
	- Транзакции не подвержены эффекту фантомного чтения.



ИТОГ: 

| Уровень изоляции       | Характеристика                                                             | Решаемые проблемы                      |
| ---------------------- | -------------------------------------------------------------------------- | -------------------------------------- |
| **`READ UNCOMMITTED`** | Чтение незафиксированных данных                                            | Не решает ни одну из проблем           |
| **`READ COMMITTED`**   | Чтение только зафиксированных данных                                       | Предотвращает грязное чтение           |
| **`REPEATABLE READ`**  | Гарантирует одинаковые результаты при повторных чтениях в одной транзакции | + Предотвращает неповторяющееся чтение |
| **`SERIALIZABLE`**     | Полная изоляция, транзакции выполняются последовательно                    | + Предотвращает чтение фантомов        |

| Проблема \ Уровень изоляции | `READ UNCOMMITTED` | `READ COMMITTED` | `REPEATABLE READ` | `SERIALIZABLE` |
| --------------------------- | ------------------ | ---------------- | ----------------- | -------------- |
| **Потерянное обновление**   | ❌ Не решена        | ✅ Решена         | ✅ Решена          | ✅ Решена       |
| **Грязное чтение**          | ❌ Не решена        | ✅ Решена         | ✅ Решена          | ✅ Решена       |
| **Неповторяющееся чтение**  | ❌ Не решена        | ❌ Не решена      | ✅ Решена          | ✅ Решена       |
| **Фантомное чтение**        | ❌ Не решена        | ❌ Не решена      | ❌ Не решена       | ✅ Решена       |

