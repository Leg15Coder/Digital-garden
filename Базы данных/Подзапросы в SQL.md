
==Опр.== **Подзапрос** – запрос, содержащийся в другом [[SQL|SQL-выражении]].

- Подзапрос всегда заключен в круглые скобки и обычно выполняется до содержащего выражения;
- Подзапросы могут вкладываться друг в друга;
- В операторе [[Операторы в SQL#^b14899|SELECT]] подзапросы можно использовать во всех разделах, кроме [[Операторы в SQL#^8fe7df|GROUP BY]].

Пример:
```sql
SELECT
	name, 
	department,
	salary
FROM employees
WHERE salary = (  -- начало подзапроса
	SELECT max(salary)
	FROM employees
);
```

#### Виды подзапросов

##### По отношению к основному запросу

1. **Несвязные**
	Полностью самодостаточные и не зависящие от основного запроса.
2. **Связные**
	Ссылаются на столбцы основного запроса.

##### По результату

1. **Скалярные**
	- 1 столбец 1 строка
	- можно обращаться без итерации (`salary = (SELECT max(salary) FROM employees);`)
2. **Векторные**
	- 1 столбец несколько строк
	- можно взаимодействовать 'как с массивом'
3. **Табличные**
	- не менее двух столбцов
	- требуют дополнительную итерацию

![[Pasted image 20250506104044.png]]
